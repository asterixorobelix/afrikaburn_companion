# Screengrabfile - Android Screenshot Configuration
#
# Package names are set dynamically by the Fastfile `android screenshots` lane
# via the configure_android_screenshot_packages! helper.

# Android package name (debug variant for testing)
app_package_name(ENV["ANDROID_SCREENSHOT_APP_PACKAGE"] || "io.asterixorobelix.afrikaburn.debug")

# Package containing screenshot tests
use_tests_in_packages([ENV["ANDROID_SCREENSHOT_TEST_PACKAGE"] || "io.asterixorobelix.afrikaburn"])

# Path to debug APK
app_apk_path("./composeApp/build/outputs/apk/debug/composeApp-debug.apk")

# Path to test APK
tests_apk_path("./composeApp/build/outputs/apk/androidTest/debug/composeApp-debug-androidTest.apk")

# Locales to capture screenshots in
locales(["en-US"])

# Output directory for screenshots
output_directory("./fastlane/screenshots/android")

# Clear previous screenshots before capturing new ones
clear_previous_screenshots(true)

# Skip opening HTML summary in CI
skip_open_summary(ENV['CI'] == 'true')

# Use ADB to grant permissions automatically
use_adb_root(false)

# Custom test runner (defined in build.gradle.kts)
test_instrumentation_runner("io.asterixorobelix.afrikaburn.TestRunner")

# Reinstall app before each locale
reinstall_app(true)
